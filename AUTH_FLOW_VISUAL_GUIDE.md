# ğŸ¯ Authentication Flow - Visual Guide

## ğŸ“± Complete User Journey Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ğŸ  APP LAUNCH                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  Auth Screen   â”‚
              â”‚  app/auth.tsx  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                           â”‚
         â–¼                           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Sign Up  â”‚              â”‚ Sign In  â”‚
    â”‚   Tab    â”‚              â”‚   Tab    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚                         â”‚
         â”‚ Enter email +           â”‚ Enter email +
         â”‚ password                â”‚ password
         â–¼                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Tap "Create      â”‚      â”‚ Tap "Sign In"    â”‚
    â”‚  Account"        â”‚      â”‚                  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                         â”‚
         â”‚ API Call to             â”‚ API Call to
         â”‚ Supabase                â”‚ Supabase
         â–¼                         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Success?         â”‚      â”‚ Email verified?  â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”                   â”Œâ”´â”€â”€â”€â”€â”
    â”‚         â”‚                   â”‚     â”‚
    â–¼         â–¼                   â–¼     â–¼
  âœ… YES    âŒ ERROR            âœ… YES  âŒ NO
    â”‚         â”‚                   â”‚     â”‚
    â”‚         â””â”€â”€â”€â”€â”€â”€â”            â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                â”‚            â”‚              â”‚
    â–¼                â–¼            â–¼              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Navigate   â”‚  â”‚ Show     â”‚  â”‚ Go   â”‚    â”‚ Show     â”‚
â”‚ to Email   â”‚  â”‚ Error    â”‚  â”‚ Home â”‚    â”‚ "Please  â”‚
â”‚ Verif.     â”‚  â”‚ Alert    â”‚  â”‚      â”‚    â”‚ verify"  â”‚
â”‚ Screen     â”‚  â”‚          â”‚  â”‚      â”‚    â”‚ message  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ğŸ“§ Email Verification Screen              â”‚
â”‚    app/email-verification.tsx                â”‚
â”‚                                              â”‚
â”‚  âœ‰ï¸  Verify Your Email                      â”‚
â”‚                                              â”‚
â”‚  We've sent a link to: user@example.com     â”‚
â”‚                                              â”‚
â”‚  Next Steps:                                â”‚
â”‚  1ï¸âƒ£ Check your inbox                        â”‚
â”‚  2ï¸âƒ£ Click verification link                 â”‚
â”‚  3ï¸âƒ£ Return here                             â”‚
â”‚                                              â”‚
â”‚  [Resend Email]  [â† Back to Sign In]        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ User opens email
       â”‚ on their device
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ“§ Email App (Gmail, etc.)           â”‚
â”‚                                              â”‚
â”‚  Subject: Confirm Your Email                â”‚
â”‚                                              â”‚
â”‚  Please confirm your email:                 â”‚
â”‚  [Confirm your email] â† Click here          â”‚
â”‚                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ User taps link
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ”— Deep Link Triggered               â”‚
â”‚         asrar://auth/callback?...            â”‚
â”‚                                              â”‚
â”‚  Operating System intercepts URL            â”‚
â”‚  Checks: Is "asrar://" registered?          â”‚
â”‚  âœ… YES â†’ Open Asrar app                     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    ğŸ“± App Opens / Resumes                    â”‚
â”‚    DeepLinkHandler in app/_layout.tsx       â”‚
â”‚                                              â”‚
â”‚  1. Parse URL parameters                    â”‚
â”‚  2. Extract access_token, refresh_token     â”‚
â”‚  3. Check for errors                        â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         ğŸ” Profile Check                     â”‚
â”‚                                              â”‚
â”‚  Does user have profile data?               â”‚
â”‚  (nameAr, nameLatin, or dobISO)             â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”
   â”‚       â”‚
   â–¼       â–¼
  âœ… YES  âŒ NO
   â”‚       â”‚
   â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                             â”‚
   â–¼                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Show Alert:  â”‚          â”‚ Show Alert:      â”‚
â”‚ "Welcome!"   â”‚          â”‚ "Complete your   â”‚
â”‚              â”‚          â”‚  profile"        â”‚
â”‚ Navigate to  â”‚          â”‚                  â”‚
â”‚ Home Screen  â”‚          â”‚ Navigate to      â”‚
â”‚              â”‚          â”‚ Profile Screen   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  ğŸ“‹ Profile Screen  â”‚
                    â”‚  app/profile.tsx    â”‚
                    â”‚                     â”‚
                    â”‚ User enters:        â”‚
                    â”‚ - Name              â”‚
                    â”‚ - Date of Birth     â”‚
                    â”‚ - Mother's name     â”‚
                    â”‚ - Location          â”‚
                    â”‚                     â”‚
                    â”‚ [Save]              â”‚
                    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Navigate to â”‚
                    â”‚ Home Screen â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Error Handling Flow

```
Sign Up Attempt
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Validation      â”‚
â”‚ - Email format  â”‚
â”‚ - Password len  â”‚
â”‚ - Password matchâ”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€âŒ Invalid â†’ Show inline error
     â”‚
     â”œâ”€â”€âœ… Valid â†’ Call API
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Supabase Response   â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€âœ… Success (EMAIL_CONFIRMATION_REQUIRED)
     â”‚   â””â”€â†’ Navigate to verification screen
     â”‚
     â”œâ”€â”€âŒ Email exists (User already registered)
     â”‚   â””â”€â†’ "This email is already registered. Try signing in instead."
     â”‚
     â”œâ”€â”€âŒ Weak password
     â”‚   â””â”€â†’ "Password must be at least 6 characters."
     â”‚
     â”œâ”€â”€âŒ Network error
     â”‚   â””â”€â†’ "No internet connection. Please check your network."
     â”‚
     â””â”€â”€âŒ Other errors
         â””â”€â†’ "Something went wrong. Please try again."
```

---

## ğŸ“¡ Deep Link Processing Flow

```
Deep Link Received: asrar://auth/callback?type=signup&access_token=xxx&...
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parse URL            â”‚
â”‚ - Extract path       â”‚
â”‚ - Extract params     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Is path              â”‚
â”‚ "auth/callback"?     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â”œâ”€â”€âŒ NO â†’ Ignore
     â”‚
     â””â”€â”€âœ… YES
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Check for      â”‚
    â”‚ error param    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”œâ”€â”€âœ… Error exists
         â”‚   â””â”€â†’ Show alert
         â”‚       Navigate to /auth
         â”‚
         â””â”€â”€âŒ No error
             â”‚
             â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Verify params: â”‚
        â”‚ - type=signup  â”‚
        â”‚ - access_token â”‚
        â”‚ - refresh_tokenâ”‚
        â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â”œâ”€â”€âŒ Missing â†’ Navigate to /auth
             â”‚
             â””â”€â”€âœ… All present
                 â”‚
                 â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Update profile â”‚
            â”‚ mode='account' â”‚
            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ Check profile  â”‚
            â”‚ data exists?   â”‚
            â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
            â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
            â”‚         â”‚
            â–¼         â–¼
          YES        NO
            â”‚         â”‚
            â”‚         â””â”€â†’ Navigate to /profile
            â”‚
            â””â”€â†’ Navigate to /(tabs)
```

---

## ğŸ¨ Screen-by-Screen Breakdown

### 1ï¸âƒ£ Auth Screen (`app/auth.tsx`)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         AsrÄr âœ¦                â”‚
â”‚  Sacred Numerology & Mysticism â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [Sign Up] [Sign In]           â”‚ â† Tab switcher
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“§ Email                       â”‚
â”‚  [your@email.com________]      â”‚
â”‚                                â”‚
â”‚  ğŸ”’ Password                   â”‚
â”‚  [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢______________]      â”‚
â”‚                                â”‚
â”‚  ğŸ”’ Confirm Password           â”‚ â† Only on Sign Up
â”‚  [â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢______________]      â”‚
â”‚                                â”‚
â”‚  [Create Account / Sign In]    â”‚ â† Shows loading state
â”‚                                â”‚
â”‚      or                        â”‚
â”‚                                â”‚
â”‚  [ğŸ‘¤ Continue as Guest]        â”‚
â”‚                                â”‚
â”‚  ğŸ›¡ï¸ Your data is encrypted     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2ï¸âƒ£ Email Verification Screen (`app/email-verification.tsx`)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         âœ‰ï¸                     â”‚ â† Large icon
â”‚                                â”‚
â”‚   Verify Your Email            â”‚
â”‚                                â”‚
â”‚ We've sent a verification      â”‚
â”‚ link to:                       â”‚
â”‚ user@example.com               â”‚ â† User's email
â”‚                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Next Steps:                    â”‚
â”‚ 1ï¸âƒ£ Check your inbox            â”‚
â”‚ 2ï¸âƒ£ Click verification link     â”‚
â”‚ 3ï¸âƒ£ Return here                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                â”‚
â”‚  [ğŸ“§ Resend Email]             â”‚ â† With cooldown
â”‚  or "Resend in 45s"            â”‚
â”‚                                â”‚
â”‚  â† Back to Sign In             â”‚
â”‚                                â”‚
â”‚ ğŸ”’ Your data is encrypted      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3ï¸âƒ£ Profile Screen (`app/profile.tsx`) - Existing
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      User Profile              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Name (Arabic)                 â”‚
â”‚  [___________________]         â”‚
â”‚                                â”‚
â”‚  Name (Latin)                  â”‚
â”‚  [___________________]         â”‚
â”‚                                â”‚
â”‚  Date of Birth                 â”‚
â”‚  [ğŸ“… Select date_______]       â”‚
â”‚                                â”‚
â”‚  Mother's Name (optional)      â”‚
â”‚  [___________________]         â”‚
â”‚                                â”‚
â”‚  Location (optional)           â”‚
â”‚  [ğŸ“ Get location_____]        â”‚
â”‚                                â”‚
â”‚  [ğŸ’¾ Save Profile]             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Security & Privacy Flow

```
User Data Journey:

1. Sign Up
   â””â”€â†’ Password hashed by Supabase
       â””â”€â†’ Never stored in plain text

2. Email Verification
   â””â”€â†’ Token in URL (one-time use)
       â””â”€â†’ Expires after 24 hours

3. Deep Link
   â””â”€â†’ Access token & refresh token
       â””â”€â†’ Stored in expo-secure-store
           â””â”€â†’ Encrypted on device

4. Profile Data
   â””â”€â†’ Stored locally
       â””â”€â†’ Optionally synced to Supabase
           â””â”€â†’ Row-level security enabled
               â””â”€â†’ Only user can access own data
```

---

## ğŸ“Š State Management

```
ProfileContext (Global State)
      â”‚
      â”œâ”€â†’ profile.mode
      â”‚   â”œâ”€ 'guest' â†’ Using app without account
      â”‚   â””â”€ 'account' â†’ Signed in with email
      â”‚
      â”œâ”€â†’ profile.nameAr
      â”œâ”€â†’ profile.nameLatin
      â”œâ”€â†’ profile.dobISO
      â”œâ”€â†’ profile.motherName
      â”œâ”€â†’ profile.location
      â”‚
      â””â”€â†’ completionStatus
          â”œâ”€ hasName: boolean
          â”œâ”€ hasDOB: boolean
          â”œâ”€ hasMother: boolean
          â””â”€ hasLocation: boolean
```

---

*Visual guide for AUTH_FLOW_IMPLEMENTATION_COMPLETE.md*
